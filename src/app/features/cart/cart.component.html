@if (!isLoading()) { @if(cartItems().length > 0){
<section
  class="py-10 my-8 rounded-2xl px-5 bg-surface-hover dark:bg-surface-dark-hover"
  data-aos="fade-right"
>
  <h1
    class="text-3xl md:text-4xl flex justify-between text-center text-primary-default leading-15 hover:text-primary-dark mb-5 dark:text-prose-dark dark:hover:text-prose-dark-hover font-semibold pb-5"
  >
    <span>{{ 'CART.ShopCart' | translate }}</span>
    <span>{{ 'CART.Items' | translate }}: {{ totalItems() }}</span>
  </h1>
  <div class="grid grid-cols-1 lg:grid-cols-12 gap-5">
    <div class="lg:col-span-8 rounded-2xl w-full">
      <div class="flex flex-col gap-5">
        @for (product of cartItems(); track product._id) {
        <div
          class="grid md:grid-cols-12 gap-5 bg-surface-default dark:bg-surface-dark rounded-2xl shadow p-4"
        >
          <div class="md:col-span-2 flex justify-center items-center">
            <img
              [src]="product.product.imageCover"
              class="w-1/2 h-[250px] md:h-auto md:w-auto rounded-2xl"
              [alt]="product.product.title"
            />
          </div>
          <div class="md:col-span-10 flex flex-col justify-between">
            <div
              class="text-prose-default dark:text-prose-dark flex flex-row justify-between items-start gap-2"
            >
              <div>
                @if (product.product.brand) {
                <span class="block mb-1">{{ product.product.brand.name }}</span
                >} @if (product.product.category) {
                <span class="block mb-1">{{ product.product.category.name }}</span
                >} <span class="block">{{ product.product.title }}</span>
              </div>
              <i
                (click)="deleteItem(product.product._id)"
                class="fa fa-trash text-red-400 text-xl cursor-pointer"
              ></i>
            </div>
            <div
              class="text-prose-default dark:text-prose-dark flex flex-row justify-between items-center mt-3 gap-2"
            >
              <span>{{ product.price | currency : 'EGP' }}</span>
              <div class="flex items-center gap-2">
                <span class="btn" (click)="updateItem(product.product._id, product.count - 1)">
                  <i class="fas fa-minus"></i>
                </span>
                <span class="p-2">{{ product.count }}</span>
                <span class="btn" (click)="updateItem(product.product._id, product.count + 1)">
                  <i class="fas fa-plus"></i>
                </span>
              </div>
            </div>
          </div>
        </div>
        }
      </div>
    </div>
    <div
      class="lg:col-span-4 w-full h-fit rounded-2xl bg-surface-default dark:bg-surface-dark shadow-lg p-5 flex flex-col gap-5"
    >
      <div class="flex justify-between items-center">
        <h2 class="text-prose-default dark:text-prose-dark text-2xl font-medium">
          {{ 'CART.OrderSummary' | translate }}
        </h2>
        <button (click)="clearCart()" class="btn w-fit bg-red-400 hover:bg-red-700 text-white">
          {{ 'CART.ClearCart' | translate }}
        </button>
      </div>
      <div class="flex justify-between items-center">
        <span class="text-prose-hover dark:text-prose-dark">{{ 'CART.Subtotal' | translate }}</span>
        <span class="text-prose-default font-medium dark:text-prose-dark-hover">
          {{ totalPrice() | currency : 'EGP' }}
        </span>
      </div>
      <div class="flex justify-between items-center">
        <span class="text-prose-hover dark:text-prose-dark">{{ 'CART.Discount' | translate }}</span>
        <span class="text-red-700 font-medium">- {{ 0 | currency : 'EGP' }}</span>
      </div>
      <div class="flex justify-between items-center">
        <span class="text-prose-hover dark:text-prose-dark">{{
          'CART.DeliveryFee' | translate
        }}</span>
        <span class="text-prose-default font-medium dark:text-prose-dark-hover">{{
          0 | currency : 'EGP'
        }}</span>
      </div>
      <hr class="border-surface-hover dark:border-surface-dark-hover" />
      <div class="flex justify-between items-center">
        <span class="text-prose-default dark:text-prose-dark font-medium text-xl sm:text-2xl">
          {{ 'CART.Total' | translate }}
        </span>
        <span class="text-prose-default font-bold dark:text-prose-dark">
          {{ totalPrice() | currency : 'EGP' }}
        </span>
      </div>
      <button
        [routerLink]="['/checkout', cartId()]"
        class="btn w-full py-3 mt-2 bg-primary-default hover:bg-primary-hover text-white dark:bg-primary-dark dark:hover:bg-primary-dark-hover"
      >
        {{ 'CART.GoToCheckout' | translate }}
      </button>
    </div>
  </div>
</section>
}@else {
<section class="bg-surface-default dark:bg-surface-dark my-5 px-4 sm:px-6 lg:px-10">
  <div class="flex flex-col justify-center items-center h-[70vh]">
    <i class="fas fa-cart-arrow-down fa-9x text-primary-dark dark:text-prose-dark"></i>
    <span class="text-4xl text-primary-dark dark:text-prose-dark font-semibold my-2">
      {{ 'CART.YourCartIsEmpty' | translate }}
    </span>
    <button
      routerLink="/products"
      class="btn w-1/4 mt-5 bg-primary-default hover:bg-primary-hover text-white dark:bg-primary-dark dark:hover:bg-primary-dark-hover"
    >
      {{ 'CART.GoToProducts' | translate }}
    </button>
  </div>
</section>
} }
